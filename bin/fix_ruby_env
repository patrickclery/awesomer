#!/bin/bash
# Set up rbenv with gemsets for RubyMine compatibility

PROJECT_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)"

# Clear any contaminating variables
unset GEM_HOME GEM_PATH RBENV_GEMSETS RBENV_GEMSET_ALREADY

# Change to project directory so rbenv reads .ruby-version and .rbenv-gemsets/.ruby-gemset
cd "$PROJECT_ROOT"

# Initialize rbenv (will load gemset plugin if available)
eval "$(rbenv init -)"

echo "âœ“ rbenv environment for awesomer project"
echo "  - Ruby version: $(ruby --version)"
echo "  - Gemset: $(rbenv gemset active 2>/dev/null || echo 'none')"
echo "  - Gem location: $(gem env gemdir)"